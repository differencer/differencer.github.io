<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Communications Toolbox 学习记录 二 ：OFDM 入门 | t'blog</title><meta name="author" content="taotaozi"><meta name="copyright" content="taotaozi"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="少说废话，现在开始看看下一个案例吧！ 这篇只写一个案例，因为这个案例还是比较复杂的，分成了多个步骤 案例：matlab 仿真OFDM系统正交频分复用 (OFDM) 是现代无线通信系统（如 5G 和 LTE 蜂窝以及 WiFi）使用的多载波数字调制技术。与单载波 QAM 等其他技术相比，OFDM 的优势包括支持更高的数据速率和更简单的接收器设计。具体而言，使用带有循环前缀 (CP) 的 OFDM 可">
<meta property="og:type" content="article">
<meta property="og:title" content="Communications Toolbox 学习记录 二 ：OFDM 入门">
<meta property="og:url" content="https://github.com/differencer/2022/03/27/communication-toolbox-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%E4%BA%8C%EF%BC%9AOFDM/index.html">
<meta property="og:site_name" content="t&#39;blog">
<meta property="og:description" content="少说废话，现在开始看看下一个案例吧！ 这篇只写一个案例，因为这个案例还是比较复杂的，分成了多个步骤 案例：matlab 仿真OFDM系统正交频分复用 (OFDM) 是现代无线通信系统（如 5G 和 LTE 蜂窝以及 WiFi）使用的多载波数字调制技术。与单载波 QAM 等其他技术相比，OFDM 的优势包括支持更高的数据速率和更简单的接收器设计。具体而言，使用带有循环前缀 (CP) 的 OFDM 可">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://github.com/differencer/img/favicon.png">
<meta property="article:published_time" content="2022-03-27T14:16:12.000Z">
<meta property="article:modified_time" content="2022-05-14T13:18:30.605Z">
<meta property="article:author" content="taotaozi">
<meta property="article:tag" content="matlab">
<meta property="article:tag" content="通信">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://github.com/differencer/img/favicon.png"><link rel="shortcut icon" href="/differencer/img/favicon.png"><link rel="canonical" href="https://github.com/differencer/2022/03/27/communication-toolbox-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%E4%BA%8C%EF%BC%9AOFDM/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/differencer/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/differencer/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"prismjs","highlightCopy":true,"highlightLang":false,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Communications Toolbox 学习记录 二 ：OFDM 入门',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-14 21:18:30'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.1.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/differencer/img/favicon.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/differencer/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/differencer/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/differencer/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/differencer/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/differencer/about"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/differencer/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/differencer/butterfly"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/differencer/" title="t'blog"><span class="site-name">t'blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/differencer/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/messageboard/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/differencer/timeline/"><i class="fa-fw fa fa-bell"></i><span> 日志</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-list"></i><span> 菜单</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/differencer/about"><i class="fa-fw /about/"></i><span> 0</span></a></li><li><a class="site-page child" href="/differencer/myself"><i class="fa-fw /myself/"></i><span> 1</span></a></li><li><a class="site-page child" href="/differencer/butterfly"><i class="fa-fw https://github.com/jerryc127/hexo-theme-butterfly/"></i><span> 2</span></a></li></ul></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Communications Toolbox 学习记录 二 ：OFDM 入门</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-27T14:16:12.000Z" title="发表于 2022-03-27 22:16:12">2022-03-27</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-14T13:18:30.605Z" title="更新于 2022-05-14 21:18:30">2022-05-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/differencer/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right post-meta-separator"></i><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/differencer/categories/%E6%8A%80%E6%9C%AF/%E9%80%9A%E4%BF%A1/">通信</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">3.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>14分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Communications Toolbox 学习记录 二 ：OFDM 入门"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p>少说废话，现在开始看看下一个案例吧！</p>
<p>这篇只写一个案例，因为这个案例还是比较复杂的，分成了多个步骤</p>
<h1 id="案例：matlab-仿真OFDM系统"><a href="#案例：matlab-仿真OFDM系统" class="headerlink" title="案例：matlab 仿真OFDM系统"></a>案例：matlab 仿真OFDM系统</h1><p>正交频分复用 (OFDM) 是现代无线通信系统（如 5G 和 LTE 蜂窝以及 WiFi）使用的多载波数字调制技术。<br>与单载波 QAM 等其他技术相比，OFDM 的优势包括支持更高的数据速率和更简单的接收器设计。<br>具体而言，使用带有循环前缀 (CP) 的 OFDM 可以实现基于快速傅里叶变换 (FFT) 的均衡和同步，与用于在单载波 QAM 中接收可比数据速率的技术相比，这简化了接收。</p>
<h2 id="1、OFDM-介绍"><a href="#1、OFDM-介绍" class="headerlink" title="1、OFDM 介绍"></a>1、OFDM 介绍</h2><p>正交频分复用 (OFDM) 通过将调制的高带宽信号载波划分到许多调制的窄带子载波上来实现高数据速率传输。对于 OFDM 传输，窄带子载波的使用降低了对频率选择性衰落的敏感度。许多最新的无线和电信标准都使用多载波 OFDM 调制格式。<br>在单载波系统中支持高数据速率需要宽带载波，有较短的符号持续时间。宽带载波通过频率选择性多径信道过滤宽带宽载波会严重降低信号质量，因为信道脉冲响应在时间上跨越多个符号并使信号容易受到符号间干扰 (ISI) 的影响。</p>
<p>为了避免在传输许多并行低带宽信号时出现 ISI，各个子载波必须相互正交。通过传输许多正交低带宽子载波来避免 ISI 激发了 OFDM。OFDM 调制器将高速率串行符号流转换为许多并行低速率流。每个正交低速率流遇到一个具有最小 ISI 的相对平坦的信道，并且可以很容易地均衡。</p>
<p>举个例子：</p>
<blockquote>
<p>一个信号，其脉冲持续时间为$T_{sym}=0.25 sec$,那么符号速率为$R_{sym}=1/T_{sym}=8Hz$,<br>将这个脉冲乘以数倍于$R_{sym}$ 如 频率为$R_{sym}、2R_{sym}、3R_{sym}$的余弦波，得到下图：<br>时域图：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ww2.mathworks.cn/help/examples/comm/win64/IntroToOFDMExample_03.png" alt=""><br>频域图：<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ww2.mathworks.cn/help/examples/comm/win64/IntroToOFDMExample_04.png" alt=""></p>
</blockquote>
<p>可以发现，每个子载波的频谱峰值出现在所有其他脉冲的过零处。<br>OFDM 调制器将所有这些子载波加在一起以形成其输出信号。子载波数据可以用不同的调制方式。<br>这里，子载波使用 QAM 方法进行基带调制。<br>数学上，OFDM调制符号采样输出为</p>
<script type="math/tex; mode=display">
s(k)=\sum_{m=0}^{N-1} a_{m, n} e^{j 2 \pi m R_{\mathrm{sym}} k\left(\frac{T_{\mathrm{sym}}}{N}\right)}</script><p>其中</p>
<ul>
<li>$a_{m, n}$是第$n$个（时域）OFDM调制符号的第$m$个子载波的 符号</li>
<li>$R_{\mathrm{sym}}$是每个QAM符号流的符号速率</li>
<li>$T_{\mathrm{sym}}=1/R_{\mathrm{sym}}$</li>
<li>$N$是子载波的数量 或者说是QAM符号流的数量</li>
</ul>
<p>公式也可以简写为</p>
<script type="math/tex; mode=display">
s(k)=\sum_{m=0}^{N-1} a_{m, n} e^{j 2 \pi\left(\frac{m k}{N}\right)}</script><p>这数学上恰好与$a_{m, n}$的离散傅里叶反变换不谋而合。</p>
<h2 id="2、没有循环前缀的OFDM-仿真"><a href="#2、没有循环前缀的OFDM-仿真" class="headerlink" title="2、没有循环前缀的OFDM 仿真"></a>2、没有循环前缀的OFDM 仿真</h2><p>首先，OFDM符号我们采用 OFDM 子载波数据用QAM调制的方案，将这些数据作为子载波前面的系数，然后利用快速傅里叶反变换（IFFT），将并行传输的数据 转换为一个个相互正交的子载波的叠加。因为每一个子载波传输的数据非常少（一个OFDM符号周期才传输一个QAM符号），所以每个子载波都是窄带的，所以大概里经历平坦衰落，接收端的均衡器均衡器每个子载波仅需要一个抽头。</p>
<p>这是一个16QAM+OFDM的程序仿真</p>
<h3 id="2-1、信源端"><a href="#2-1、信源端" class="headerlink" title="2.1、信源端"></a>2.1、信源端</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">bps <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">% Bits per symbol</span>
M <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">^</span>bps<span class="token punctuation">;</span>  <span class="token comment">% 16QAM</span>
nFFT <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span> <span class="token comment">% Number of FFT bins</span>

txsymbols <span class="token operator">=</span> <span class="token function">randi</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span> M<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nFFT<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
txgrid <span class="token operator">=</span> <span class="token function">qammod</span><span class="token punctuation">(</span>txsymbols<span class="token punctuation">,</span>M<span class="token punctuation">,</span>UnitAveragePower<span class="token operator">=</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span>
txout <span class="token operator">=</span> <span class="token function">ifft</span><span class="token punctuation">(</span>txgrid<span class="token punctuation">,</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">stem</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>nFFT<span class="token punctuation">,</span><span class="token function">real</span><span class="token punctuation">(</span>txout<span class="token punctuation">)</span><span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ww2.mathworks.cn/help/examples/comm/win64/BasicOFDMWithNoCyclicPrefixExample_01.png" alt=""></p>
<h3 id="2-2、信道"><a href="#2-2、信道" class="headerlink" title="2.2、信道"></a>2.2、信道</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">rxin <span class="token operator">=</span> <span class="token function">awgn</span><span class="token punctuation">(</span>txout<span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
rxgrid <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span>rxin<span class="token punctuation">,</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span> 
rxsymbols <span class="token operator">=</span> <span class="token function">qamdemod</span><span class="token punctuation">(</span>rxgrid<span class="token punctuation">,</span>M<span class="token punctuation">,</span>UnitAveragePower<span class="token operator">=</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token keyword">if</span> <span class="token function">isequal</span><span class="token punctuation">(</span>txsymbols<span class="token punctuation">,</span>rxsymbols<span class="token punctuation">)</span> 
    <span class="token function">disp</span><span class="token punctuation">(</span> "恢复的符号与传输的符号匹配。" <span class="token punctuation">)</span>
 <span class="token keyword">else</span> 
    <span class="token function">disp</span><span class="token punctuation">(</span> "恢复的符号与传输的符号不匹配。" <span class="token punctuation">)</span>
 <span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>IFFT 的所有 bin（应该是指输入系数） 都填充有用数据。在实际系统中，边缘端子载波通常留空以用作保护带，并且一些子载波 可用于发送特定的导频信号。保护带和导频信号的组合有助于同步和均衡。   </p>
<h2 id="3、均衡、卷积、以及循环前缀"><a href="#3、均衡、卷积、以及循环前缀" class="headerlink" title="3、均衡、卷积、以及循环前缀"></a>3、均衡、卷积、以及循环前缀</h2><h3 id="3-1、频域均衡"><a href="#3-1、频域均衡" class="headerlink" title="3.1、频域均衡"></a>3.1、频域均衡</h3><p>这个例子介绍了频域均衡，并展示了如何将循环卷积“转换”（其实不叫转换，得到前len(u)个想要的结果）为线性卷积</p>
<p>当考虑线性信道模型时，接收信号是发射信号与信道脉冲响应的卷积。<br>也即：</p>
<script type="math/tex; mode=display">Y(f)=H(f)U(f)</script><p>只要知道了频域相应$H(f)$,就还可以得到信号,即<script type="math/tex">U(f)=\frac{Y(f)}{H(f)}</script><br>其实这个式子就是频域均衡</p>
<h3 id="3-2、卷积"><a href="#3-2、卷积" class="headerlink" title="3.2、卷积"></a>3.2、卷积</h3><p>但是FFT处理产生的其实是信号$u$和$h$的循环卷积（这是为啥？），为了将这种循环卷积转换为线性卷积，$u$,$h$填充零的个数至少到 length(u)+length(h)-1 (<strong>填零策略</strong>)</p>
<blockquote>
<p>如果得到的必是循环卷积，那么，子载波数量N应该是len(u)+len(h)-1,</p>
<p>eg:输入8个数据，信道冲击为3径，那么N至少为8+3-1=10<br>也就是填2个0</p>
</blockquote>
<p>看一个循环卷积和线性卷积的区别例子<br><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">u1 <span class="token operator">=</span> <span class="token number">1</span><span class="token operator">:</span><span class="token number">8</span><span class="token punctuation">;</span> 
h <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token number">1</span> <span class="token number">0.4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

figure
<span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>
<span class="token function">stem</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">10</span> <span class="token number">0</span> <span class="token number">10</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">title</span><span class="token punctuation">(</span>"Input signal"<span class="token punctuation">)</span>
<span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">)</span>
<span class="token function">stem</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">axis</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span> <span class="token number">10</span> <span class="token number">0</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token function">title</span><span class="token punctuation">(</span>"Channel impulse response"<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre><br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ww2.mathworks.cn/help/examples/comm/win64/EqualizationConvolutionAndCyclicPrefixAdditionExample_01.png" alt=""></p>
<p>循环前缀能够把信道消弭未知信道时延的影响（循环长度大于最大信道时延长度即可）</p>
<h3 id="3-3、循环前缀"><a href="#3-3、循环前缀" class="headerlink" title="3.3、循环前缀"></a>3.3、循环前缀</h3><p>对于 OFDM 处理，循环卷积的必要填充是通过添加 CP 而不是对信号进行零填充来提供的。添加重复符号结束样本的 CP 可启用：</p>
<ul>
<li>通过IFFT&amp;FFT计算的卷积转换为循环卷积</li>
<li>用于信道估计、均衡和同步的简单频域处理</li>
<li>用于前向纠错方案的重复样本</li>
</ul>
<pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">L <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>      <span class="token comment">% Length of channel</span>
N <span class="token operator">=</span> <span class="token function">length</span><span class="token punctuation">(</span>u1<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">% Length of input signal</span>
ucp <span class="token operator">=</span> <span class="token function">u1</span><span class="token punctuation">(</span>N<span class="token operator">-</span>L<span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">% Use last samples of input signal as the CP</span>
u2 <span class="token operator">=</span> <span class="token punctuation">[</span>ucp u1<span class="token punctuation">]</span><span class="token punctuation">;</span>      <span class="token comment">% Prepend the CP to the input signal</span>
yl2 <span class="token operator">=</span> <span class="token function">conv</span><span class="token punctuation">(</span>u2<span class="token punctuation">,</span>h<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">% Convolution of input+CP and channel</span>
yl2 <span class="token operator">=</span> <span class="token function">yl2</span><span class="token punctuation">(</span>L<span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Remove CP to compare signals</span>

figure<span class="token punctuation">;</span>
<span class="token function">stem</span><span class="token punctuation">(</span>yc1<span class="token punctuation">,</span>"x"<span class="token punctuation">)</span>
hold on<span class="token punctuation">;</span>
<span class="token function">stem</span><span class="token punctuation">(</span>yl2<span class="token punctuation">,</span>"o"<span class="token punctuation">)</span>
<span class="token function">title</span><span class="token punctuation">(</span>"Convolution Results with Cyclic Prefix"<span class="token punctuation">)</span>
<span class="token function">legend</span> <span class="token punctuation">(</span>"Linear"<span class="token punctuation">,</span>"Circular"<span class="token punctuation">,</span>"Location"<span class="token punctuation">,</span>"northwest"<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ww2.mathworks.cn/help/examples/comm/win64/EqualizationConvolutionAndCyclicPrefixAdditionExample_03.png" alt=""></p>
<p>对比循环卷积与线性卷积的误差使得否达到要求<br><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token keyword">if</span> <span class="token function">max</span><span class="token punctuation">(</span>yc1 <span class="token operator">-</span> <span class="token function">yl2</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>N<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1e-8</span>
    <span class="token function">disp</span><span class="token punctuation">(</span>"Linear and circular convolution sequences match<span class="token punctuation">.</span>"<span class="token punctuation">)</span>
<span class="token keyword">else</span>
    <span class="token function">disp</span><span class="token punctuation">(</span>"Received symbols do not match transmitted symbols<span class="token punctuation">.</span>"<span class="token punctuation">)</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h2 id="4、加CP的OFDM仿真"><a href="#4、加CP的OFDM仿真" class="headerlink" title="4、加CP的OFDM仿真"></a>4、加CP的OFDM仿真</h2><p>在这个案例中，将构建一个带有循环前缀的16QAM &amp; OFDM 仿真<br>为了能有效的均衡，循环前缀的长度必须大于信道长度（上一节说了，只有填零或者前缀的个数大于len（u）+len（h）-1 才有可能将循环卷积“转换”为线性卷积）</p>
<h3 id="4-1、基本参数"><a href="#4-1、基本参数" class="headerlink" title="4.1、基本参数"></a>4.1、基本参数</h3><p>定义 QAM 和 OFDM 处理的变量。生成符号、QAM 调制、OFDM 调制，然后将 CP 添加到信号中。多个OFDM符号可以同时处理然后串行化。<br><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">bps <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">% Number of bits per symbol  相当于之前的k = log2(M)</span>
M <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">^</span>bps<span class="token punctuation">;</span>  <span class="token comment">% Modulation order</span>
nFFT <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span> <span class="token comment">% Number of FFT bins</span>
nCP <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>    <span class="token comment">% CP length</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre></p>
<h3 id="4-2-发射端"><a href="#4-2-发射端" class="headerlink" title="4.2 发射端"></a>4.2 发射端</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">txsymbols <span class="token operator">=</span> <span class="token function">randi</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span> M<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nFFT<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
txgrid <span class="token operator">=</span> <span class="token function">qammod</span><span class="token punctuation">(</span>txsymbols<span class="token punctuation">,</span>M<span class="token punctuation">,</span>UnitAveragePower<span class="token operator">=</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span>
txout <span class="token operator">=</span> <span class="token function">ifft</span><span class="token punctuation">(</span>txgrid<span class="token punctuation">,</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% To process multiple symbols, vectorize the txout matrix</span>
<span class="token comment">% 这一步不太明白，我测试了一下，好像有没有这一句没区别啊!</span>
txout <span class="token operator">=</span> <span class="token function">txout</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% 取cp、加cp</span>
txcp <span class="token operator">=</span> <span class="token function">txout</span><span class="token punctuation">(</span>nFFT<span class="token operator">-</span>nCP<span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span>
txout <span class="token operator">=</span> <span class="token punctuation">[</span>txcp<span class="token punctuation">;</span> txout<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-3、噪声部分-（噪声、频选、延迟）"><a href="#4-3、噪声部分-（噪声、频选、延迟）" class="headerlink" title="4.3、噪声部分 （噪声、频选、延迟）"></a>4.3、噪声部分 （噪声、频选、延迟）</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">hchan <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token number">1</span> <span class="token number">0.4</span><span class="token punctuation">]</span><span class="token operator">.'</span><span class="token punctuation">;</span>       <span class="token comment">% 信道冲激响应</span>
rxin <span class="token operator">=</span> <span class="token function">awgn</span><span class="token punctuation">(</span>txout<span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">% Add noise   </span>
rxin <span class="token operator">=</span> <span class="token function">conv</span><span class="token punctuation">(</span>rxin<span class="token punctuation">,</span>hchan<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">% Add frequency dependency</span>
channelDelay <span class="token operator">=</span> dsp<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Could use fractional delay 我发现效果就是第一个数据是零后面的数据是原数据往后移动一位</span>
rxin <span class="token operator">=</span> <span class="token function">channelDelay</span><span class="token punctuation">(</span>rxin<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">% Add delay</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="4-4、接收端"><a href="#4-4、接收端" class="headerlink" title="4.4、接收端"></a>4.4、接收端</h3><p>添加一个小于 CP 长度的随机偏移量。零模型的偏移设置可在发射和接收信号之间实现完美同步？。任何小于 CP 长度的时序偏移都可以通过额外的线性相位进行均衡补偿。<br>[这个偏移量offset 到底有什么用？为什么设成随机的，难道是信道参数吗？？]<br>答：</p>
<ul>
<li>1、可能是模拟了一个信道产生的频偏，是信道参数。</li>
<li>2、可能是同步时产生的误差（没有找到正确的OFDM信号开始的位置）<br>（以下结论参考自北京大学赵玉萍OFDM系统的频偏与时篇PPT）<br><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://s2.loli.net/2022/04/01/PMe56Dc3wE2KuIQ.png" alt=""></li>
<li>载波频率偏移对于低频信号的作用相当于在OFDM时域采样序列上增添了一个等效指数因子</li>
<li>该因子是随着时间连续变化的，即 n = 0 ~ N</li>
<li>频偏对系统的影响可写为归一化频偏的函数$\epsilon=df/\Delta f$($\Delta f$是子载波间隔、$df$是频偏)</li>
</ul>
<pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">offset <span class="token operator">=</span> <span class="token function">randi</span><span class="token punctuation">(</span>nCP<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">% random offset less than length of CP</span>
<span class="token comment">% Remove CP and synchronize the received signal</span>
<span class="token comment">% 下面这一步1、去掉了CP头，2、假设完美同步（时延消除）3、往前多了 offset</span>
rxsync <span class="token operator">=</span> <span class="token function">rxin</span><span class="token punctuation">(</span>nCP<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>channelDelay<span class="token punctuation">.</span>Length<span class="token operator">-</span>offset<span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
rxgrid <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span><span class="token function">rxsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">,</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>至于为什么取rxsync = rxin(nCP+1+channelDelay.Length-offset:end); 就能表示频偏还是不太明白。<br>可能的推导思路：</p>
<blockquote>
<p>设<strong>发射端</strong>经过IFFT变换之后传输信号为：</p>
<script type="math/tex; mode=display">
\boldsymbol{s}(\boldsymbol{n})=\sum_{l=0}^{N-1} X(l) e^{j \frac{2 \pi}{N} n l}</script><p>若接收信号存在频率偏移, 此时信号应表示为</p>
<script type="math/tex; mode=display">
\boldsymbol{r}(\boldsymbol{n})=\sum_{l=0}^{N-1} X(l) e^{j \frac{2 \pi}{N} n l} e^{j \frac{2 \pi}{N} n \epsilon}+\boldsymbol{w}(n)=\sum_{l=0}^{N-1} X(l) e^{j \frac{2 \pi}{N} n (l+\epsilon)}+\boldsymbol{w}(n)</script><p>$\boldsymbol{w}(n)$ 为高斯噪声的取样值</p>
</blockquote>
<pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab"><span class="token comment">% 是否使用均衡？</span>
useEqualizer <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token keyword">if</span> useEqualizer
    hfchan <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span>hchan<span class="token punctuation">,</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">% 毫无疑问，hfchan是信道的频域相应，</span>
    <span class="token comment">% Linear phase term related to timing offset</span>
    offsetf <span class="token operator">=</span> <span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1i</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token operator">*</span>offset <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>nFFT<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">.'</span><span class="token operator">/</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">%这一步好像是给信号应该是将原来的频偏给消除了</span>
    rxgrideq <span class="token operator">=</span> rxgrid <span class="token operator">./</span> <span class="token punctuation">(</span>hfchan <span class="token operator">.*</span> offsetf<span class="token punctuation">)</span><span class="token punctuation">;</span>

    
<span class="token keyword">else</span> <span class="token comment">% Without equalization errors occur</span>
    rxgrideq <span class="token operator">=</span> rxgrid<span class="token punctuation">;</span>
<span class="token keyword">end</span>
rxsymbols <span class="token operator">=</span> <span class="token function">qamdemod</span><span class="token punctuation">(</span>rxgrideq<span class="token punctuation">,</span>M<span class="token punctuation">,</span>UnitAveragePower<span class="token operator">=</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token function">max</span><span class="token punctuation">(</span>txsymbols <span class="token operator">-</span> rxsymbols<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1e-8</span>
    <span class="token function">disp</span><span class="token punctuation">(</span>"Receiver output matches transmitter input<span class="token punctuation">.</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">disp</span><span class="token punctuation">(</span>"Received symbols do not match transmitted symbols<span class="token punctuation">.</span>"<span class="token punctuation">)</span>
<span class="token keyword">end</span>
<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="5、the-final-matlab-OFDM-仿真"><a href="#5、the-final-matlab-OFDM-仿真" class="headerlink" title="5、the final - matlab OFDM 仿真"></a>5、the final - matlab OFDM 仿真</h2><h3 id="5-1、-基本配置"><a href="#5-1、-基本配置" class="headerlink" title="5.1、 基本配置"></a>5.1、 基本配置</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">k <span class="token operator">=</span> <span class="token number">4</span><span class="token punctuation">;</span>       <span class="token comment">% Number of bits per symbol </span>
M <span class="token operator">=</span> <span class="token number">2</span><span class="token operator">^</span>k<span class="token punctuation">;</span>     <span class="token comment">% Modulation order</span>
nFFT <span class="token operator">=</span> <span class="token number">128</span><span class="token punctuation">;</span>  <span class="token comment">% Number of FFT bins</span>
cplen <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>   <span class="token comment">% CP length</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5-2、-发射端"><a href="#5-2、-发射端" class="headerlink" title="5.2、 发射端"></a>5.2、 发射端</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">txsymbols <span class="token operator">=</span> <span class="token function">randi</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span> M<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>nFFT<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
txgrid <span class="token operator">=</span> <span class="token function">qammod</span><span class="token punctuation">(</span>txsymbols<span class="token punctuation">,</span>M<span class="token punctuation">,</span>UnitAveragePower<span class="token operator">=</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span>
txout <span class="token operator">=</span> <span class="token function">ifft</span><span class="token punctuation">(</span>txgrid<span class="token punctuation">,</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span>
txout <span class="token operator">=</span> <span class="token function">txout</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Vectorize matrix if processing multiple symbols</span>
txcp <span class="token operator">=</span> <span class="token function">txout</span><span class="token punctuation">(</span>nFFT<span class="token operator">-</span>cplen<span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">;</span>
txout <span class="token operator">=</span> <span class="token punctuation">[</span>txcp<span class="token punctuation">;</span> txout<span class="token punctuation">]</span><span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<ul>
<li>一个OFDM符号的时间长度$T_{symbol}$是子载波间隔$\Delta f$的倒数(因为OFDM符号是各个子载波信号在时域上的叠加，所以一个符号时间就是一个子载波的符号周期，而一个子载波的符号时间等于器在载波间隔的倒数)</li>
<li><strong>一个OFDM符号</strong>我们用<strong>N（nFFT）个采样点</strong>表示 这里是128点</li>
<li>所以采样点之间的时间间隔为  $T_{symbol}/N$ , 采样频率为 $N \Delta f $，所以这里为什么除以2呢？？？？奇怪。</li>
</ul>
<pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">scs <span class="token operator">=</span> <span class="token number">20e3</span><span class="token punctuation">;</span>        <span class="token comment">% Subcarrier spacing in Hz  子载波间隔？</span>
Fs <span class="token operator">=</span> scs <span class="token operator">*</span> nFFT<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">% Sampling rate (1.28e6 Hz) 采样频率</span>
Ts <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> Fs<span class="token punctuation">;</span>       <span class="token comment">% Sample duration in seconds  </span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">Tend <span class="token operator">=</span> Ts <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">length</span><span class="token punctuation">(</span>txout<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">211</span><span class="token punctuation">)</span>
hold off
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>Ts<span class="token operator">:</span>Tend<span class="token punctuation">,</span><span class="token function">real</span><span class="token punctuation">(</span>txout<span class="token punctuation">)</span><span class="token punctuation">,</span>"<span class="token operator">*</span>"<span class="token punctuation">)</span>
<span class="token function">title</span><span class="token punctuation">(</span>"Real component of transmitter output"<span class="token punctuation">)</span>
<span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">212</span><span class="token punctuation">)</span>
hold off
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>Ts<span class="token operator">:</span>Tend<span class="token punctuation">,</span><span class="token function">imag</span><span class="token punctuation">(</span>txout<span class="token punctuation">)</span><span class="token punctuation">,</span>"<span class="token operator">*</span>"<span class="token punctuation">)</span>
<span class="token function">title</span><span class="token punctuation">(</span>"Imaginary component of transmitter output"<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="5-2-1、-过采样"><a href="#5-2-1、-过采样" class="headerlink" title="5.2.1、 过采样"></a>5.2.1、 过采样</h3><p>Define an FFT length longer than nFFT to cause oversampling in time domain. To aid comparison later, insert zeros into the middle of txgrid to maintain correspondence between bin centers for the original and upsampled signals. A control here allows you to adjust the integer oversampling rate used by the OFDM modulator output and demodulator input.<br>定义一个长度大于nFFT的 FFT，这样可以在时域上过采样。为了便于比较，在 txgrid 的中间插入零以保持原始信号和上采样信号的 bin 中心之间的对应关系（为什么？）。upFactor 是过采样倍数可以自行调整</p>
<p>% 我更改了以下填零的顺序，发现并没有太大的变化，都能拟合<br>是那么叫保持原始信号和上采样 信号 系数中心之间的对应关系？有什么样的对应关系需要保持呢？</p>
<blockquote>
<p>答：在IFFT变换矩阵中，每行的前一半都是正频率而后一半都是负频率。因此，若要使用过采样，就应该将0添加到输入数据的中间而非末尾 —— 这样就能够确保添加的0数据值被映射到正和负频率一半的子载波上，而非0数据则被映射到0Hz附近的子载波上 <a target="_blank" rel="noopener" href="https://blog.csdn.net/misskissC/article/details/51315653">参考资料</a> ，<br>呃 还是没懂 ，他妈的</p>
</blockquote>
<pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">upFactor <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
nFFTUp  <span class="token operator">=</span> upFactor <span class="token operator">*</span> nFFT<span class="token punctuation">;</span>
fftgrid <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">txgrid</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>nFFT<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">...</span>
    <span class="token function">zeros</span><span class="token punctuation">(</span><span class="token punctuation">(</span>upFactor<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">*</span>nFFT<span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">...</span>
    <span class="token function">txgrid</span><span class="token punctuation">(</span><span class="token punctuation">(</span>nFFT<span class="token operator">/</span><span class="token number">2</span><span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">:</span>nFFT<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">% Each column of fftgrid is one OFDM symbol</span>
txout <span class="token operator">=</span> upFactor <span class="token operator">*</span> <span class="token function">ifft</span><span class="token punctuation">(</span>fftgrid<span class="token punctuation">,</span>nFFTUp<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">% Vectorize the matrix to process multiple OFDM symbols</span>
txout <span class="token operator">=</span> <span class="token function">txout</span><span class="token punctuation">(</span><span class="token operator">:</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
cplenUp <span class="token operator">=</span> cplen <span class="token operator">*</span> upFactor<span class="token punctuation">;</span>
txcp <span class="token operator">=</span> <span class="token function">txout</span><span class="token punctuation">(</span>nFFTUp<span class="token operator">-</span>cplenUp<span class="token operator">+</span><span class="token number">1</span><span class="token operator">:</span>nFFTUp<span class="token punctuation">)</span><span class="token punctuation">;</span>
txout <span class="token operator">=</span> <span class="token punctuation">[</span>txcp<span class="token punctuation">;</span> txout<span class="token punctuation">]</span><span class="token punctuation">;</span>
Ts <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> <span class="token punctuation">(</span>upFactor<span class="token operator">*</span>Fs<span class="token punctuation">)</span><span class="token punctuation">;</span>
Tend <span class="token operator">=</span> Ts <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token function">length</span><span class="token punctuation">(</span>txout<span class="token punctuation">)</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">211</span><span class="token punctuation">)</span>
hold on
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>Ts<span class="token operator">:</span>Tend<span class="token punctuation">,</span><span class="token function">real</span><span class="token punctuation">(</span>txout<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">legend</span> <span class="token punctuation">(</span>"Original"<span class="token punctuation">,</span>"Upsampled"<span class="token punctuation">,</span>"Location"<span class="token punctuation">,</span>"southeast"<span class="token punctuation">)</span>
<span class="token function">subplot</span><span class="token punctuation">(</span><span class="token number">212</span><span class="token punctuation">)</span>
hold on
<span class="token function">plot</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>Ts<span class="token operator">:</span>Tend<span class="token punctuation">,</span><span class="token function">imag</span><span class="token punctuation">(</span>txout<span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token function">legend</span> <span class="token punctuation">(</span>"Original"<span class="token punctuation">,</span>"Upsampled"<span class="token punctuation">,</span>"Location"<span class="token punctuation">,</span>"southeast"<span class="token punctuation">)</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="https://ww2.mathworks.cn/help/examples/comm/win64/OFDMWithFFTBasedOversamplingExample_01.png" alt=""></p>
<h3 id="5-3、信道"><a href="#5-3、信道" class="headerlink" title="5.3、信道"></a>5.3、信道</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">hchan <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0.4</span> <span class="token number">1</span> <span class="token number">0.4</span><span class="token punctuation">]</span><span class="token operator">.'</span><span class="token punctuation">;</span>       <span class="token comment">% 信道冲击</span>
rxin <span class="token operator">=</span> <span class="token function">awgn</span><span class="token punctuation">(</span>txout<span class="token punctuation">,</span><span class="token number">40</span><span class="token punctuation">)</span><span class="token punctuation">;</span>       <span class="token comment">% Add noise   </span>
rxin <span class="token operator">=</span> <span class="token function">conv</span><span class="token punctuation">(</span>rxin<span class="token punctuation">,</span>hchan<span class="token punctuation">)</span><span class="token punctuation">;</span>     <span class="token comment">% Add frequency dependency</span>
channelDelay <span class="token operator">=</span> dsp<span class="token punctuation">.</span><span class="token function">Delay</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% Could use fractional delay 时延</span>
rxin <span class="token operator">=</span> <span class="token function">channelDelay</span><span class="token punctuation">(</span>rxin<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">% Add delay</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>添加一个小于 CP 长度的随机偏移量。零模型的偏移设置可在发射和接收信号之间实现完美同步。任何小于 CP 长度的时序偏移都可以通过额外的线性相位进行均衡补偿。为了直接比较不同速率的信号，在 FFT 处理之前，通过上采样因子对同步信号进行归一化。<br><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">offset <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token function">randi</span><span class="token punctuation">(</span>cplenUp<span class="token punctuation">)</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">% random offset less than length of CP</span>
<span class="token comment">% Remove CP and synchronize the received signal</span>
rxsync <span class="token operator">=</span> <span class="token function">rxin</span><span class="token punctuation">(</span>cplenUp<span class="token operator">+</span><span class="token number">1</span><span class="token operator">+</span>channelDelay<span class="token punctuation">.</span>Length<span class="token operator">-</span>offset<span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

rxgrid <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span><span class="token function">rxsync</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>nFFTUp<span class="token punctuation">)</span><span class="token punctuation">,</span>nFFTUp<span class="token punctuation">)</span><span class="token operator">/</span>upFactor<span class="token punctuation">;</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre></p>
<h3 id="5-4-接收端均衡"><a href="#5-4-接收端均衡" class="headerlink" title="5.4 接收端均衡"></a>5.4 接收端均衡</h3><pre class="line-numbers language-matlab" data-language="matlab"><code class="language-matlab">useEqualizer <span class="token operator">=</span> true<span class="token punctuation">;</span>
<span class="token keyword">if</span> useEqualizer
    <span class="token comment">%注意，接收端iFFT采用的是 nFFT×过采样倍数 的点数！！！！！！！！</span>
    hfchan <span class="token operator">=</span> <span class="token function">fft</span><span class="token punctuation">(</span>hchan<span class="token punctuation">,</span>nFFTUp<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token comment">% Linear phase term related to timing offset</span>
    offsetf <span class="token operator">=</span> <span class="token function">exp</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1i</span> <span class="token operator">*</span> <span class="token number">2</span><span class="token operator">*</span><span class="token keyword">pi</span><span class="token operator">*</span>offset <span class="token operator">*</span> <span class="token punctuation">(</span><span class="token number">0</span><span class="token operator">:</span>nFFTUp<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">.'</span><span class="token operator">/</span>nFFTUp<span class="token punctuation">)</span><span class="token punctuation">;</span>
    rxgrideq <span class="token operator">=</span> rxgrid <span class="token operator">./</span> <span class="token punctuation">(</span>hfchan <span class="token operator">.*</span> offsetf<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span> <span class="token comment">% Without equalization errors occur</span>
    rxgrideq <span class="token operator">=</span> rxgrid<span class="token punctuation">;</span>
<span class="token keyword">end</span>
rxgridNoZeroPad <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token function">rxgrideq</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">:</span>nFFT<span class="token operator">/</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">...</span>
    <span class="token function">rxgrideq</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">+</span><span class="token punctuation">(</span>upFactor<span class="token operator">-</span><span class="token number">0.5</span><span class="token punctuation">)</span><span class="token operator">*</span>nFFT<span class="token punctuation">)</span><span class="token operator">:</span><span class="token keyword">end</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">% 取前nFFT/2个，取后nFFT/2个</span>
rxsymbols <span class="token operator">=</span> <span class="token function">qamdemod</span><span class="token punctuation">(</span>rxgridNoZeroPad<span class="token punctuation">,</span>M<span class="token punctuation">,</span>UnitAveragePower<span class="token operator">=</span>true<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token function">max</span><span class="token punctuation">(</span>txsymbols <span class="token operator">-</span> rxsymbols<span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">1e-8</span>
    <span class="token function">disp</span><span class="token punctuation">(</span>"Oversampled receiver output matches transmitter input<span class="token punctuation">.</span>"<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">else</span>
    <span class="token function">disp</span><span class="token punctuation">(</span>"Received symbols do not match transmitted symbols<span class="token punctuation">.</span>"<span class="token punctuation">)</span>
<span class="token keyword">end</span><span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>这一小节先到这里啦~ 还有n多问题没有解决 555，主要集中在：<br>1、设置的偏移上（offset），rxsync = rxin(cplenUp+1+channelDelay.Length-offset:end); 这里的意义<br>2、过采样的时候，在iFFT前  为什么中间填零，而不是两边？<br>3、3径信道的影响没看到呀，哦哦，可能是OFDM以为天然抵抗多径，所以没啥影响。</p>
<p>后续知道答案时会及时解决</p>
</article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/differencer/tags/matlab/">matlab</a><a class="post-meta__tags" href="/differencer/tags/%E9%80%9A%E4%BF%A1/">通信</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/differencer/2022/04/22/communication-toolbox-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%E5%9B%9B%EF%BC%9Aturbo%E7%A0%81%E7%BC%96%E7%A0%81%E5%99%A8/" title="commnication toolbox 学习记录四：turbo码编码器对象，以及turbo码入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">commnication toolbox 学习记录四：turbo码编码器对象，以及turbo码入门</div></div></a></div><div class="next-post pull-right"><a href="/differencer/2022/03/17/communication-toolbox-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%E4%B8%80/" title="Communications Toolbox 学习记录一:仿真框架"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Communications Toolbox 学习记录一:仿真框架</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/differencer/2022/03/17/communication-toolbox-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%E4%B8%80/" title="Communications Toolbox 学习记录一:仿真框架"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-03-17</div><div class="title">Communications Toolbox 学习记录一:仿真框架</div></div></a></div><div><a href="/differencer/2022/04/27/communication-toolbox-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%E4%B8%89/" title="无线信号波形发生器-communication toolbox 学习记录（三）"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-27</div><div class="title">无线信号波形发生器-communication toolbox 学习记录（三）</div></div></a></div><div><a href="/differencer/2022/04/22/communication-toolbox-%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95%E5%9B%9B%EF%BC%9Aturbo%E7%A0%81%E7%BC%96%E7%A0%81%E5%99%A8/" title="commnication toolbox 学习记录四：turbo码编码器对象，以及turbo码入门"><div class="cover" style="background: var(--default-bg-color)"></div><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2022-04-22</div><div class="title">commnication toolbox 学习记录四：turbo码编码器对象，以及turbo码入门</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="giscus-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" data-lazy-src="/differencer/img/favicon.png" onerror="this.onerror=null;this.src='/differencer/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">taotaozi</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/differencer/archives/"><div class="headline">文章</div><div class="length-num">15</div></a><a href="/differencer/tags/"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/differencer/categories/"><div class="headline">分类</div><div class="length-num">3</div></a></div><a id="card-info-btn" href="https://github.com/differencer"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/differencer" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:1359114644@qq.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">最近的新任务是 ： 努力啊</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content is-expand"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%A1%88%E4%BE%8B%EF%BC%9Amatlab-%E4%BB%BF%E7%9C%9FOFDM%E7%B3%BB%E7%BB%9F"><span class="toc-text">案例：matlab 仿真OFDM系统</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1%E3%80%81OFDM-%E4%BB%8B%E7%BB%8D"><span class="toc-text">1、OFDM 介绍</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2%E3%80%81%E6%B2%A1%E6%9C%89%E5%BE%AA%E7%8E%AF%E5%89%8D%E7%BC%80%E7%9A%84OFDM-%E4%BB%BF%E7%9C%9F"><span class="toc-text">2、没有循环前缀的OFDM 仿真</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#2-1%E3%80%81%E4%BF%A1%E6%BA%90%E7%AB%AF"><span class="toc-text">2.1、信源端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-2%E3%80%81%E4%BF%A1%E9%81%93"><span class="toc-text">2.2、信道</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3%E3%80%81%E5%9D%87%E8%A1%A1%E3%80%81%E5%8D%B7%E7%A7%AF%E3%80%81%E4%BB%A5%E5%8F%8A%E5%BE%AA%E7%8E%AF%E5%89%8D%E7%BC%80"><span class="toc-text">3、均衡、卷积、以及循环前缀</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#3-1%E3%80%81%E9%A2%91%E5%9F%9F%E5%9D%87%E8%A1%A1"><span class="toc-text">3.1、频域均衡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-2%E3%80%81%E5%8D%B7%E7%A7%AF"><span class="toc-text">3.2、卷积</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-3%E3%80%81%E5%BE%AA%E7%8E%AF%E5%89%8D%E7%BC%80"><span class="toc-text">3.3、循环前缀</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4%E3%80%81%E5%8A%A0CP%E7%9A%84OFDM%E4%BB%BF%E7%9C%9F"><span class="toc-text">4、加CP的OFDM仿真</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#4-1%E3%80%81%E5%9F%BA%E6%9C%AC%E5%8F%82%E6%95%B0"><span class="toc-text">4.1、基本参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-2-%E5%8F%91%E5%B0%84%E7%AB%AF"><span class="toc-text">4.2 发射端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-3%E3%80%81%E5%99%AA%E5%A3%B0%E9%83%A8%E5%88%86-%EF%BC%88%E5%99%AA%E5%A3%B0%E3%80%81%E9%A2%91%E9%80%89%E3%80%81%E5%BB%B6%E8%BF%9F%EF%BC%89"><span class="toc-text">4.3、噪声部分 （噪声、频选、延迟）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-4%E3%80%81%E6%8E%A5%E6%94%B6%E7%AB%AF"><span class="toc-text">4.4、接收端</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5%E3%80%81the-final-matlab-OFDM-%E4%BB%BF%E7%9C%9F"><span class="toc-text">5、the final - matlab OFDM 仿真</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-1%E3%80%81-%E5%9F%BA%E6%9C%AC%E9%85%8D%E7%BD%AE"><span class="toc-text">5.1、 基本配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2%E3%80%81-%E5%8F%91%E5%B0%84%E7%AB%AF"><span class="toc-text">5.2、 发射端</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-2-1%E3%80%81-%E8%BF%87%E9%87%87%E6%A0%B7"><span class="toc-text">5.2.1、 过采样</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3%E3%80%81%E4%BF%A1%E9%81%93"><span class="toc-text">5.3、信道</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-%E6%8E%A5%E6%94%B6%E7%AB%AF%E5%9D%87%E8%A1%A1"><span class="toc-text">5.4 接收端均衡</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/differencer/2022/06/22/java-%E5%9F%BA%E7%A1%80%E7%AF%87-String%E7%B1%BB/" title="java 基础篇 String类">java 基础篇 String类</a><time datetime="2022-06-22T05:53:45.000Z" title="发表于 2022-06-22 13:53:45">2022-06-22</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/differencer/2022/06/01/%E8%AF%AD%E9%9F%B3%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%EF%BC%88%E5%85%AB%EF%BC%89%E7%AB%AF%E5%88%B0%E7%AB%AF%E8%AF%AD%E9%9F%B3%E5%88%86%E7%A6%BB%E4%B8%8E%E7%9B%AE%E6%A0%87%E8%AF%B4%E8%AF%9D%E4%BA%BA%E6%8A%BD%E5%8F%96/" title="语音信号处理（八）端到端语音分离与目标说话人抽取">语音信号处理（八）端到端语音分离与目标说话人抽取</a><time datetime="2022-06-01T13:21:34.000Z" title="发表于 2022-06-01 21:21:34">2022-06-01</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/differencer/2022/05/30/%E8%AF%AD%E9%9F%B3%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%EF%BC%88%E4%B8%83%EF%BC%89%20%E5%9F%BA%E4%BA%8EDNN%E7%9A%84%E8%AF%AD%E9%9F%B3%E5%88%86%E7%A6%BB/" title="语音信号处理（七） 基于DNN的语音分离">语音信号处理（七） 基于DNN的语音分离</a><time datetime="2022-05-30T08:54:05.000Z" title="发表于 2022-05-30 16:54:05">2022-05-30</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/differencer/2022/05/26/%E8%AF%AD%E9%9F%B3%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%EF%BC%88%E5%85%AD%EF%BC%89%E9%98%B5%E5%88%97%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86/" title="语音信号处理（六） 阵列信号处理">语音信号处理（六） 阵列信号处理</a><time datetime="2022-05-26T07:11:36.000Z" title="发表于 2022-05-26 15:11:36">2022-05-26</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/differencer/2022/05/23/%E8%AF%AD%E9%9F%B3%E4%BF%A1%E5%8F%B7%E5%A4%84%E7%90%86%EF%BC%88%E4%BA%94%EF%BC%89%E5%A3%B0%E5%AD%A6%E5%9B%9E%E5%A3%B0%E6%B6%88%E9%99%A4/" title="语音信号处理（五）声学回声消除">语音信号处理（五）声学回声消除</a><time datetime="2022-05-23T01:41:22.000Z" title="发表于 2022-05-23 09:41:22">2022-05-23</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2023 By taotaozi</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/differencer/js/utils.js"></script><script src="/differencer/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><div class="js-pjax"><script>function loadGiscus () {
  let nowTheme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  const config = Object.assign({
    src: 'https://giscus.app/client.js',
    'data-repo': 'differencer/giscus',
    'data-repo-id': 'R_kgDOJMrL1A',
    'data-category-id': 'DIC_kwDOJMrL1M4CVC1y',
    'data-mapping': 'pathname',
    'data-theme': nowTheme,
    'data-reactions-enabled': '1',
    crossorigin: 'anonymous',
    async: true
  },null)

  let ele = document.createElement('script')
  for (let key in config) {
    ele.setAttribute(key, config[key])
  }
  document.getElementById('giscus-wrap').insertAdjacentElement('afterbegin',ele)
}

function changeGiscusTheme () {
  const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'light'

  function sendMessage(message) {
    const iframe = document.querySelector('iframe.giscus-frame');
    if (!iframe) return;
    iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
  }

  sendMessage({
    setConfig: {
      theme: theme
    }
  });
}

if ('Giscus' === 'Giscus' || !false) {
  if (false) btf.loadComment(document.getElementById('giscus-wrap'), loadGiscus)
  else loadGiscus()
} else {
  function loadOtherComment () {
    loadGiscus()
  }
}</script></div><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="富强,民主,文明,和谐" data-fontsize="15px" data-random="true" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>